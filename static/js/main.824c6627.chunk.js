(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{123:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=(n(73),n(41)),s=n(33),i=n.n(s),u=(n(123),n(24)),o=n.n(u),l=n(36),d=n(1),j=function(){return Object(d.jsxs)("nav",{className:o.a.nav,children:[Object(d.jsx)("div",{className:o.a.item,children:Object(d.jsx)(l.b,{to:"/profile",className:function(e){return e.isActive?o.a.active:o.a.item},children:"Profile"})}),Object(d.jsx)("div",{className:"".concat(o.a.item," ").concat(o.a.active),children:Object(d.jsx)(l.b,{to:"/dialogs",className:function(e){return e.isActive?o.a.active:o.a.item},children:"Messages"})}),Object(d.jsx)("div",{className:"".concat(o.a.item," ").concat(o.a.active),children:Object(d.jsx)(l.b,{to:"/users",className:function(e){return e.isActive?o.a.active:o.a.item},children:"Users"})}),Object(d.jsx)("div",{className:o.a.item,children:Object(d.jsx)("a",{children:"News"})}),Object(d.jsx)("div",{className:o.a.item,children:Object(d.jsx)("a",{children:"Music"})}),Object(d.jsx)("div",{className:o.a.item,children:Object(d.jsx)("a",{children:"Settings"})})]})},b=n(7),f=n(5),p=n(68),O=n(69),h=n(71),g=n(72),m=n(65),v=n.n(m),x=n(157),w=c.a.memo((function(e){return Object(d.jsxs)("header",{className:v.a.header,children:[Object(d.jsx)("img",{src:"http://a.espncdn.com/combiner/i?img=%2Fi%2Fteamlogos%2Fncaa%2F500%2F41.png"}),Object(d.jsx)("div",{className:v.a.loginBlock,children:e.isAuth?Object(d.jsxs)("div",{children:[" ",e.login,"  -  ",Object(d.jsx)(x.a,{onClick:e.logout,children:"Log out"})," "]}):Object(d.jsx)(l.b,{to:"/login",children:Object(d.jsx)(x.a,{children:"Login"})})})]})})),y=n(30),_=n(48),E=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(d.jsx)(w,Object(f.a)({},this.props))}}]),n}(c.a.Component),S=Object(y.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthUserData:_.b,logout:_.d})(E),I=n(155),P=n(154),k=n(16),A=c.a.forwardRef((function(e,t){return Object(d.jsx)(P.a,Object(f.a)({elevation:6,ref:t,variant:"filled"},e))}));function N(){var e=Object(y.c)(),t=Object(a.b)((function(e){return e.app.error})),n=function(t,n){"clickaway"!==n&&e(Object(k.c)(null))};return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(I.a,{open:!!t,autoHideDuration:6e3,onClose:n,children:Object(d.jsx)(A,{onClose:n,severity:"error",sx:{width:"100%"},children:t})})})}var T=n(159),C=n(160),U=c.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,219))})),F=c.a.lazy((function(){return n.e(4).then(n.bind(null,221))})),D=c.a.lazy((function(){return Promise.all([n.e(0),n.e(6),n.e(8)]).then(n.bind(null,216))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,222))}));var R=function(){var e=Object(y.c)(),t=Object(a.b)((function(e){return e.app.isInitialized})),n=Object(a.b)((function(e){return e.app.status}));return Object(r.useEffect)((function(){e(Object(k.b)())}),[]),t?Object(d.jsxs)(l.a,{children:["loading"===n&&Object(d.jsx)(C.a,{color:"secondary"}),Object(d.jsxs)("div",{className:"app-wrapper",children:[Object(d.jsx)(j,{}),Object(d.jsx)(S,{}),Object(d.jsx)(N,{}),Object(d.jsx)("div",{className:"app-wrapper-content",children:Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsxs)(b.d,{children:[Object(d.jsx)(b.b,{path:"/",element:Object(d.jsx)(U,{})}),Object(d.jsx)(b.b,{path:"/users",element:Object(d.jsx)(F,{})}),Object(d.jsx)(b.b,{path:"/dialogs",element:Object(d.jsx)(L,{})}),Object(d.jsx)(b.b,{path:"/profile",element:Object(d.jsx)(U,{})}),Object(d.jsx)(b.b,{path:"/profile/:userId",element:Object(d.jsx)(z,{})}),Object(d.jsx)(b.b,{path:"/login",element:Object(d.jsx)(D,{})}),Object(d.jsx)(b.b,{path:"/404",element:Object(d.jsx)("h1",{children:"404: PAGE NOT FOUND"})}),Object(d.jsx)(b.b,{path:"*",element:Object(d.jsx)(b.a,{to:"/404"})})]})})})]})]}):Object(d.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(d.jsx)(T.a,{})})},z=function(){var e=Object(b.h)().userId;return Object(d.jsx)(U,{userId:e})};i.a.render(Object(d.jsx)(y.a,{store:a.a,children:Object(d.jsx)(R,{})}),document.getElementById("root"))},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return h}));var r=n(11),c=n(25),a=n(5),s=n(37),i=n(42),u=n.n(i),o=n(23),l="APP/SET-STATUS",d="APP/SET-ERROR",j="APP_SET_INITIALISED",b={status:"idle",error:null,isInitialized:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(a.a)(Object(a.a)({},e),{},{status:t.status});case d:return Object(a.a)(Object(a.a)({},e),{},{error:t.error});case j:return Object(a.a)(Object(a.a)({},e),{},{isInitialized:t.isInitialized});default:return e}},p=function(e){return{type:l,status:e}},O=function(e){return{type:d,error:e}},h=function(){return function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(p("loading")),e.prev=1,e.next=4,o.a.me();case 4:0===(n=e.sent).data.resultCode?t(p("succeeded")):Object(s.a)(n.data,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),u.a.isAxiosError(e.t0)&&Object(s.b)(e.t0,t);case 11:return e.prev=11,t({type:j,isInitialized:!0}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}},23:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var r=n(42),c=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"5fc11a34-7258-4926-8c00-915edb4f940c"}}),a={getUsers:function(e,t){return c.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return c.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return c.delete("follow/".concat(e)).then((function(e){return e.data}))},getProfile:function(e){return console.warn("Obsolete method. Please use profileAPI object"),s.getProfile(e)}},s={getProfile:function(e){return c.get("profile/"+e)},getStatus:function(e){return c.get("profile/status/"+e)},updateStatus:function(e){return c.put("profile/status",{status:e})}},i={me:function(){return c.get("auth/me")},login:function(e){return c.post("auth/login",e)},logout:function(){return c.delete("auth/login")}}},24:function(e,t,n){e.exports={nav:"Navbar_nav__E9WQA",item:"Navbar_item__1pvoY",active:"Navbar_active__JJzMm"}},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return a}));var r=n(16),c=function(e,t){t(Object(r.c)(e.message))},a=function(e,t){e.messages.length?t(Object(r.c)(e.messages[0])):t(Object(r.c)("some error occured")),t(Object(r.d)("failed"))}},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var r=n(52),c=n(48),a=n(82),s=n(70),i=n(85),u=n(88),o=n(30),l=n(16),d=Object(r.b)({profilePage:s.b,dialogsPage:a.a,usersPage:i.a,auth:c.a,app:l.a}),j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.c,b=Object(r.d)(d,j(Object(r.a)(u.a))),f=o.d;window.store=b,t.a=b},48:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return O}));var r=n(11),c=n(25),a=n(5),s=n(23),i=n(37),u=n(42),o=n.n(u),l=n(16),d="samurai-network/auth/SET_USER_DATA",j={userId:null,email:null,login:null,isAuth:!1},b=function(e,t,n,r){return{type:d,data:{userId:e,email:t,login:n,isAuth:r}}},f=function(){return function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(l.d)("loading")),e.next=3,s.a.me();case 3:0===(n=e.sent).data.resultCode&&(t(b(n.data.data.id,n.data.data.email,n.data.data.login,!0)),t(Object(l.d)("succeeded")));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){var c;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(l.d)("loading")),t.prev=1,t.next=4,s.a.login(e);case 4:0===(c=t.sent).data.resultCode?(n(f()),n(Object(l.d)("succeeded"))):Object(i.a)(c.data,n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o.a.isAxiosError(t.t0)&&Object(i.b)(t.t0,n);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},O=function(){return function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(l.d)("loading")),e.prev=1,e.next=4,s.a.logout();case 4:0===(n=e.sent).data.resultCode?(t(b(null,null,null,!1)),t(Object(l.d)("succeeded"))):Object(i.a)(n.data,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o.a.isAxiosError(e.t0)&&Object(i.b)(e.t0,t);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;return t.type===d?Object(a.a)(Object(a.a)({},e),t.data):e}},65:function(e,t,n){e.exports={header:"Header_header__1s3Oq",loginBlock:"Header_loginBlock__3uV6g"}},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return p}));var r=n(11),c=n(25),a=n(20),s=n(5),i=n(23),u="SET_USER_PROFILE",o="SET_STATUS",l={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It's my first post",likesCount:11},{id:3,message:"It's my second post",likesCount:11},{id:4,message:"It's my third post",likesCount:11}],profile:null,status:""},d=function(e){return{type:"ADD-POST",newPost:e}},j=function(e){return{type:o,status:e}},b=function(e){return function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){var c;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.c.getProfile(e);case 2:c=t.sent,n((r=c.data,{type:u,profile:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){var c;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getStatus(e);case 2:c=t.sent,n(j(c.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(j(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:5,message:t.newPost,likesCount:0};return Object(s.a)(Object(s.a)({},e),{},{posts:[].concat(Object(a.a)(e.posts),[n])});case"DELETE-POST":return Object(s.a)(Object(s.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.postId}))});case u:return Object(s.a)(Object(s.a)({},e),{},{profile:t.profile});case o:return Object(s.a)(Object(s.a)({},e),{},{status:t.status});default:return e}}},73:function(e,t,n){},82:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(20),c=n(5),a="SEND_MESSAGE",s={dialogs:[{id:1,name:"Dimych",photo:"https://wallpaperaccess.com/full/1137909.jpg"},{id:2,name:"Andrew",photo:"https://w-dog.ru/wallpapers/1/0/486999962535069/revolyucioner-kak-simvol-svobody-i-silnogo-duxa.jpg"},{id:3,name:"Denis",photo:"http://media.filmz.ru/photos/full/f_102338.jpg"},{id:4,name:"Sacha",photo:"http://fanhair.ru/wp-content/uploads/2018/07/10.jpg"},{id:5,name:"Victor",photo:"https://i.pinimg.com/736x/3c/ec/d8/3cecd89ac384bbbea155b3a12c38f855--gabriel-aubry-boss-black.jpg"},{id:6,name:"Valera",photo:"https://avatars.photodoska.ru/upload/23-11-17/7facdadcf2f82169ff799dce5951794d.jpeg"}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you"},{id:3,message:"Will you be mine?"},{id:4,message:"Yo"},{id:5,message:"Hi"},{id:6,message:"Hi"}]},i=function(e){return{type:a,newMessageBody:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;if(t.type===a){var n=t.newMessageBody;return Object(c.a)(Object(c.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:7,message:n}])})}return e}},85:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return _})),n.d(t,"e",(function(){return E}));var r=n(11),c=n(25),a=n(20),s=n(5),i=n(23),u=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(s.a)(Object(s.a)({},e),r):e}))},o="FOLLOW",l="UNFOLLOW",d="SET_USERS",j="SET_CURRENT_PAGE",b="SET_TOTAL_USERS_COUNT",f="TOGGLE_IS_FETCHING",p="TOGGLE_IS_FOLLOWING_PROGRESS",O={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},h=function(e){return{type:o,userId:e}},g=function(e){return{type:l,userId:e}},m=function(e){return{type:j,currentPage:e}},v=function(e){return{type:f,isFetching:e}},x=function(e,t){return{type:p,isFetching:e,userId:t}},w=function(e,t){return function(){var n=Object(c.a)(Object(r.a)().mark((function n(c){var a;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(v(!0)),c(m(e)),n.next=4,i.c.getUsers(e,t);case 4:a=n.sent,c(v(!1)),c((s=a.items,{type:d,users:s})),c((r=a.totalCount,{type:b,count:r}));case 8:case"end":return n.stop()}var r,s}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(){var e=Object(c.a)(Object(r.a)().mark((function e(t,n,c,a){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x(!0,n)),e.next=3,c(n);case 3:0==e.sent.resultCode&&t(a(n)),t(x(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}(),_=function(e){return function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(n,e,i.c.follow.bind(i.c),h);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(n,e,i.c.unfollow.bind(i.c),g);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(s.a)(Object(s.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!0})});case l:return Object(s.a)(Object(s.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!1})});case d:return Object(s.a)(Object(s.a)({},e),{},{users:t.users});case j:return Object(s.a)(Object(s.a)({},e),{},{currentPage:t.currentPage});case b:return Object(s.a)(Object(s.a)({},e),{},{totalUsersCount:t.count});case f:return Object(s.a)(Object(s.a)({},e),{},{isFetching:t.isFetching});case p:return Object(s.a)(Object(s.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(a.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}}}},[[125,2,3]]]);
//# sourceMappingURL=main.824c6627.chunk.js.map