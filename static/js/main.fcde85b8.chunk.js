(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{123:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=(n(73),n(42)),s=n(35),u=n.n(s),i=(n(123),n(25)),o=n.n(i),l=n(38),d=n(1),f=function(){return Object(d.jsxs)("nav",{className:o.a.nav,children:[Object(d.jsx)("div",{className:o.a.item,children:Object(d.jsx)(l.b,{to:"/profile",className:function(e){return e.isActive?o.a.active:o.a.item},children:"Profile"})}),Object(d.jsx)("div",{className:"".concat(o.a.item," ").concat(o.a.active),children:Object(d.jsx)(l.b,{to:"/dialogs",className:function(e){return e.isActive?o.a.active:o.a.item},children:"Messages"})}),Object(d.jsx)("div",{className:"".concat(o.a.item," ").concat(o.a.active),children:Object(d.jsx)(l.b,{to:"/users",className:function(e){return e.isActive?o.a.active:o.a.item},children:"Users"})}),Object(d.jsx)("div",{className:o.a.item,children:Object(d.jsx)("a",{children:"News"})}),Object(d.jsx)("div",{className:o.a.item,children:Object(d.jsx)("a",{children:"Music"})}),Object(d.jsx)("div",{className:o.a.item,children:Object(d.jsx)("a",{children:"Settings"})})]})},b=n(7),j=n(5),p=n(69),O=n(70),h=n(71),v=n(72),g=n(65),m=n.n(g),x=n(157),w=a.a.memo((function(e){return Object(d.jsxs)("header",{className:m.a.header,children:[Object(d.jsx)("img",{src:"http://a.espncdn.com/combiner/i?img=%2Fi%2Fteamlogos%2Fncaa%2F500%2F41.png"}),Object(d.jsx)("div",{className:m.a.loginBlock,children:e.isAuth?Object(d.jsxs)("div",{children:[" ",e.login,"  -  ",Object(d.jsx)(x.a,{onClick:e.logout,children:"Log out"})," "]}):Object(d.jsx)(l.b,{to:"/login",children:Object(d.jsx)(x.a,{children:"Login"})})})]})})),y=n(31),S=n(48),E=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(d.jsx)(w,Object(j.a)({},this.props))}}]),n}(a.a.Component),P=Object(y.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthUserData:S.b,logout:S.d})(E),_=n(155),k=n(154),I=n(17),A=a.a.forwardRef((function(e,t){return Object(d.jsx)(k.a,Object(j.a)({elevation:6,ref:t,variant:"filled"},e))}));function C(){var e=Object(y.c)(),t=Object(c.b)((function(e){return e.app.error})),n=function(t,n){"clickaway"!==n&&e(Object(I.c)(null))};return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(_.a,{open:!!t,autoHideDuration:6e3,onClose:n,children:Object(d.jsx)(A,{onClose:n,severity:"error",sx:{width:"100%"},children:t})})})}var T=n(159),N=n(160),U=a.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,228))})),F=a.a.lazy((function(){return n.e(5).then(n.bind(null,230))})),D=a.a.lazy((function(){return Promise.all([n.e(0),n.e(6),n.e(8)]).then(n.bind(null,225))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,229))}));var R=function(){var e=Object(y.c)(),t=Object(c.b)((function(e){return e.app.isInitialized})),n=Object(c.b)((function(e){return e.app.status}));return Object(r.useEffect)((function(){e(Object(I.b)())}),[]),t?Object(d.jsxs)(l.a,{children:["loading"===n&&Object(d.jsx)(N.a,{color:"secondary"}),Object(d.jsxs)("div",{className:"app-wrapper",children:[Object(d.jsx)(f,{}),Object(d.jsx)(P,{}),Object(d.jsx)(C,{}),Object(d.jsx)("div",{className:"app-wrapper-content",children:Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsxs)(b.d,{children:[Object(d.jsx)(b.b,{path:"/",element:Object(d.jsx)(U,{})}),Object(d.jsx)(b.b,{path:"/users",element:Object(d.jsx)(F,{})}),Object(d.jsx)(b.b,{path:"/dialogs",element:Object(d.jsx)(L,{})}),Object(d.jsx)(b.b,{path:"/profile",element:Object(d.jsx)(U,{})}),Object(d.jsx)(b.b,{path:"/profile/:userId",element:Object(d.jsx)(z,{})}),Object(d.jsx)(b.b,{path:"/login",element:Object(d.jsx)(D,{})}),Object(d.jsx)(b.b,{path:"/404",element:Object(d.jsx)("h1",{children:"404: PAGE NOT FOUND"})}),Object(d.jsx)(b.b,{path:"*",element:Object(d.jsx)(b.a,{to:"/404"})})]})})})]})]}):Object(d.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(d.jsx)(T.a,{})})},z=function(){var e=Object(b.h)().userId;return Object(d.jsx)(U,{userId:e})};u.a.render(Object(d.jsx)(y.a,{store:c.a,children:Object(d.jsx)(R,{})}),document.getElementById("root"))},16:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return i}));var r=n(33),a=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"5fc11a34-7258-4926-8c00-915edb4f940c"}}),c={getUsers:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))},getProfile:function(e){return console.warn("Obsolete method. Please use profileAPI object"),s.getProfile(e)}},s={getProfile:function(e){return a.get("profile/"+e)},getStatus:function(e){return a.get("profile/status/"+e)},updateStatus:function(e){return a.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),a.put("profile/photo",t,{headers:{"Content-Type":"form/multipart"}})},saveProfile:function(e){return a.put("profile",e)}},u={me:function(){return a.get("auth/me")},login:function(e){return a.post("auth/login",e)},logout:function(){return a.delete("auth/login")}},i={getCaptchaUrl:function(){return a.get("security/get-captcha-url")}}},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return h}));var r=n(11),a=n(18),c=n(5),s=n(29),u=n(33),i=n.n(u),o=n(16),l="APP/SET-STATUS",d="APP/SET-ERROR",f="APP_SET_INITIALISED",b={status:"idle",error:null,isInitialized:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(c.a)(Object(c.a)({},e),{},{status:t.status});case d:return Object(c.a)(Object(c.a)({},e),{},{error:t.error});case f:return Object(c.a)(Object(c.a)({},e),{},{isInitialized:t.isInitialized});default:return e}},p=function(e){return{type:l,status:e}},O=function(e){return{type:d,error:e}},h=function(){return function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(p("loading")),e.prev=1,e.next=4,o.a.me();case 4:0===(n=e.sent).data.resultCode?t(p("succeeded")):Object(s.a)(n.data,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.a.isAxiosError(e.t0)&&Object(s.b)(e.t0,t);case 11:return e.prev=11,t({type:f,isInitialized:!0}),t(p("idle")),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[1,8,11,15]])})));return function(t){return e.apply(this,arguments)}}()}},25:function(e,t,n){e.exports={nav:"Navbar_nav__E9WQA",item:"Navbar_item__1pvoY",active:"Navbar_active__JJzMm"}},29:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(17),a=function(e,t){t(Object(r.c)(e.message))},c=function(e,t){e.messages.length?t(Object(r.c)(e.messages[0])):t(Object(r.c)("some error occured")),t(Object(r.d)("failed"))}},42:function(e,t,n){"use strict";n.d(t,"b",(function(){return j}));var r=n(52),a=n(48),c=n(82),s=n(68),u=n(85),i=n(88),o=n(31),l=n(17),d=Object(r.b)({profilePage:s.b,dialogsPage:c.a,usersPage:u.a,auth:a.a,app:l.a}),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.c,b=Object(r.d)(d,f(Object(r.a)(i.a))),j=o.d;window.store=b,t.a=b},48:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return v}));var r=n(11),a=n(18),c=n(5),s=n(16),u=n(29),i=n(33),o=n.n(i),l=n(17),d="samurai-network/auth/SET_USER_DATA",f="samurai-network/auth/GET_CAPTCHA_URL_SUCCESS",b={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},j=function(e,t,n,r){return{type:d,data:{userId:e,email:t,login:n,isAuth:r}}},p=function(e){return{type:f,data:{captchaUrl:e}}},O=function(){return function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(l.d)("loading")),e.next=3,s.a.me();case 3:0===(n=e.sent).data.resultCode&&(t(j(n.data.data.id,n.data.data.email,n.data.data.login,!0)),t(Object(l.d)("succeeded")));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(l.d)("loading")),t.prev=1,t.next=4,s.a.login(e);case 4:0===(a=t.sent).data.resultCode?(n(O()),n(Object(l.d)("succeeded"))):(10===a.data.resultCode&&n(g()),Object(u.a)(a.data,n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o.a.isAxiosError(t.t0)&&Object(u.b)(t.t0,n);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},v=function(){return function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(l.d)("loading")),e.prev=1,e.next=4,s.a.logout();case 4:0===(n=e.sent).data.resultCode?(t(j(null,null,null,!1)),t(Object(l.d)("succeeded"))):Object(u.a)(n.data,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o.a.isAxiosError(e.t0)&&Object(u.b)(e.t0,t);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},g=function(){return function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.c.getCaptchaUrl();case 3:n=e.sent,a=n.data.url,t(p(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.a.isAxiosError(e.t0)&&Object(u.b)(e.t0,t);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:case f:return Object(c.a)(Object(c.a)({},e),t.data);default:return e}}},65:function(e,t,n){e.exports={header:"Header_header__1s3Oq",loginBlock:"Header_loginBlock__3uV6g"}},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return x}));var r=n(11),a=n(18),c=n(22),s=n(5),u=n(16),i=n(29),o=n(33),l=n.n(o),d="profilePage/SET_USER_PROFILE",f="profilePage/SET_STATUS",b="profilePage/SAVE_PHOTOS_SUCCESS",j={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It's my first post",likesCount:11},{id:3,message:"It's my second post",likesCount:11},{id:4,message:"It's my third post",likesCount:11}],profile:null,status:""},p=function(e){return{type:"ADD-POST",newPost:e}},O=function(e){return{type:f,status:e}},h=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.d.getProfile(e);case 2:a=t.sent,n((r=a.data,{type:d,profile:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.getStatus(e);case 2:a=t.sent,n(O(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.b.updateStatus(e);case 3:0===(a=t.sent).data.resultCode?n(O(e)):Object(i.a)(a.data,n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),l.a.isAxiosError(t.t0)&&Object(i.b)(t.t0,n);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.savePhoto(e);case 2:0===(a=t.sent).data.resultCode&&n((r=a.data.data.photos,{type:b,photos:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n,a){var c,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth.userId,t.next=3,u.b.saveProfile(e);case 3:0===(s=t.sent).data.resultCode?n(h(c)):Object(i.a)(s.data,n);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:5,message:t.newPost,likesCount:0};return Object(s.a)(Object(s.a)({},e),{},{posts:[].concat(Object(c.a)(e.posts),[n])});case"DELETE-POST":return Object(s.a)(Object(s.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.postId}))});case d:return Object(s.a)(Object(s.a)({},e),{},{profile:t.profile});case f:return Object(s.a)(Object(s.a)({},e),{},{status:t.status});case b:return Object(s.a)(Object(s.a)({},e),{},{profile:Object(s.a)(Object(s.a)({},e.profile),{},{photos:Object(s.a)({},t.photos)})});default:return e}}},73:function(e,t,n){},82:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(22),a=n(5),c="SEND_MESSAGE",s={dialogs:[{id:1,name:"Dimych",photo:"https://wallpaperaccess.com/full/1137909.jpg"},{id:2,name:"Andrew",photo:"https://w-dog.ru/wallpapers/1/0/486999962535069/revolyucioner-kak-simvol-svobody-i-silnogo-duxa.jpg"},{id:3,name:"Denis",photo:"http://media.filmz.ru/photos/full/f_102338.jpg"},{id:4,name:"Sacha",photo:"http://fanhair.ru/wp-content/uploads/2018/07/10.jpg"},{id:5,name:"Victor",photo:"https://i.pinimg.com/736x/3c/ec/d8/3cecd89ac384bbbea155b3a12c38f855--gabriel-aubry-boss-black.jpg"},{id:6,name:"Valera",photo:"https://avatars.photodoska.ru/upload/23-11-17/7facdadcf2f82169ff799dce5951794d.jpeg"}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you"},{id:3,message:"Will you be mine?"},{id:4,message:"Yo"},{id:5,message:"Hi"},{id:6,message:"Hi"}]},u=function(e){return{type:c,newMessageBody:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;if(t.type===c){var n=t.newMessageBody;return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:7,message:n}])})}return e}},85:function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return E}));var r=n(11),a=n(18),c=n(22),s=n(5),u=n(16),i=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(s.a)(Object(s.a)({},e),r):e}))},o="FOLLOW",l="UNFOLLOW",d="SET_USERS",f="SET_CURRENT_PAGE",b="SET_TOTAL_USERS_COUNT",j="TOGGLE_IS_FETCHING",p="TOGGLE_IS_FOLLOWING_PROGRESS",O={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},h=function(e){return{type:o,userId:e}},v=function(e){return{type:l,userId:e}},g=function(e){return{type:f,currentPage:e}},m=function(e){return{type:j,isFetching:e}},x=function(e,t){return{type:p,isFetching:e,userId:t}},w=function(e,t){return function(){var n=Object(a.a)(Object(r.a)().mark((function n(a){var c;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(m(!0)),a(g(e)),n.next=4,u.d.getUsers(e,t);case 4:c=n.sent,a(m(!1)),a((s=c.items,{type:d,users:s})),a((r=c.totalCount,{type:b,count:r}));case 8:case"end":return n.stop()}var r,s}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t,n,a,c){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x(!0,n)),e.next=3,a(n);case 3:0==e.sent.resultCode&&t(c(n)),t(x(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),S=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(n,e,u.d.follow.bind(u.d),h);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(n,e,u.d.unfollow.bind(u.d),v);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(s.a)(Object(s.a)({},e),{},{users:i(e.users,t.userId,"id",{followed:!0})});case l:return Object(s.a)(Object(s.a)({},e),{},{users:i(e.users,t.userId,"id",{followed:!1})});case d:return Object(s.a)(Object(s.a)({},e),{},{users:t.users});case f:return Object(s.a)(Object(s.a)({},e),{},{currentPage:t.currentPage});case b:return Object(s.a)(Object(s.a)({},e),{},{totalUsersCount:t.count});case j:return Object(s.a)(Object(s.a)({},e),{},{isFetching:t.isFetching});case p:return Object(s.a)(Object(s.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}}}},[[125,2,3]]]);
//# sourceMappingURL=main.fcde85b8.chunk.js.map